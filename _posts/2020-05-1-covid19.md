---
title: "Analysis of Covid-19"
date: 2020-04-28
tags: [data visualisation, modelling, web scraping]
header:
  image: "/images/cdc-w9KEokhajKw-unsplash.jpg"
excerpt: "Web scraping, data visualisation and basic modelling of Covid-19 Cases"
mathjax: "true"
---
### Data Collection
Data was collected via web scraping from [here](https://www.worldometers.info/coronavirus/) using pythons BeautifulSoup package. <br>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country</th>
      <th>Total Cases</th>
      <th>Total Deaths</th>
      <th>Total Recovered</th>
      <th>Total Tests</th>
      <th>Population</th>
      <th>Continent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>USA</td>
      <td>1,652,076</td>
      <td>97,850</td>
      <td>404,283</td>
      <td>14,044,138</td>
      <td>330,795,837</td>
      <td>North America</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Brazil</td>
      <td>339,687</td>
      <td>21,579</td>
      <td>135,430</td>
      <td>735,224</td>
      <td>212,397,420</td>
      <td>South America</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Russia</td>
      <td>335,882</td>
      <td>3,388</td>
      <td>107,936</td>
      <td>8,402,747</td>
      <td>145,927,974</td>
      <td>Europe</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Spain</td>
      <td>281,904</td>
      <td>28,628</td>
      <td>196,958</td>
      <td>3,037,840</td>
      <td>46,752,901</td>
      <td>Europe</td>
    </tr>
    <tr>
      <th>4</th>
      <td>UK</td>
      <td>257,154</td>
      <td>36,675</td>
      <td>N/A</td>
      <td>3,348,507</td>
      <td>67,848,130</td>
      <td>Europe</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>210</th>
      <td>Western Sahara</td>
      <td>6</td>
      <td></td>
      <td>6</td>
      <td></td>
      <td>595,623</td>
      <td>Africa</td>
    </tr>
    <tr>
      <th>211</th>
      <td>Anguilla</td>
      <td>3</td>
      <td></td>
      <td>3</td>
      <td></td>
      <td>14,989</td>
      <td>North America</td>
    </tr>
    <tr>
      <th>212</th>
      <td>Lesotho</td>
      <td>2</td>
      <td></td>
      <td></td>
      <td>274</td>
      <td>2,140,421</td>
      <td>Africa</td>
    </tr>
    <tr>
      <th>213</th>
      <td>Saint Pierre Miquelon</td>
      <td>1</td>
      <td></td>
      <td>1</td>
      <td></td>
      <td>5,797</td>
      <td>North America</td>
    </tr>
    <tr>
      <th>214</th>
      <td>China</td>
      <td>82,971</td>
      <td>4,634</td>
      <td>78,258</td>
      <td></td>
      <td>1,439,323,776</td>
      <td>Asia</td>
    </tr>
  </tbody>
</table>
<p>215 rows Ã— 7 columns</p>
</div>

### Visualising geographic distribution
![](/images/covid_images/barh_worldcases.png)
![](/images/covid_images/lin_confcases.png)
![](/images/covid_images/log_confcases.png)
[Location of confirmed USA cases as of 15th March 2020](/images/covid_images/marker_cluster_usa_2020-03-15.html) <br>
[Map of confirmed USA cases as  of 28th April 2020](/images/covid_images/2020-04-28_chloropleth.html) <br>
[Map of World Cases](/images/covid_images/world_cases_2020_28_4.html) <br>

### Modelling Growth

The growth of a disease over time follows an exponential curve, as more individuals are infected, they pass the disease onto more people and so on. This is known as [exponential growth](https://en.wikipedia.org/wiki/Exponential_growth):<br>
<img src="https://latex.codecogs.com/gif.latex?N(t)" title="N(t)" /> = Number of cases on a given day <br>
<img src="https://latex.codecogs.com/gif.latex?E" title="E" /> = Average number of people someone infected is exposed to to each day <br>
<img src="https://latex.codecogs.com/gif.latex?p" title="p" /> = Probability of each exposure leading to an infection.

$$N(t) = (1+Ep)^tN(0)$$

This model would just grow forever if the growth rate <img src="https://latex.codecogs.com/gif.latex?1&plus;Ep" title="1+Ep" /> stayed the same, however a disease is limited by the population. However we can assume that the probabilty of exposure leading to an infection is limited by the proportion of people already infected, <img src="https://latex.codecogs.com/gif.latex?p&space;=&space;1&space;-&space;\frac{N(t)}{Population&space;Size}" title="p = 1 - \frac{N(t)}{Population Size}" />


```python
def expGrowth(E, p, N_0, days, Pop):
    cases = []
    cases.append(N_0)
    for day in range(1, days):
        p = p * (1 - cases[-1]/Pop)
        daily_cases = (1 + E * p)**day * N_0
        cases.append(daily_cases)
                 
    return np.cumsum(cases)
```


```python
import numpy as np
import matplotlib.pyplot as plt

E = [50, 5]
p = [0.1, 0.2]
Pop = 100000000
days = 100
N_0 = 1

for i in range(0, 2):
    for j in range(0, 2):
        cases = expGrowth(E[i], p[j], N_0, days, Pop)
        plt.plot(range(0, days), cases, label = "E={} p={}".format(E[i], p[j]))
    
    
plt.xlabel("Day", fontsize=16)  
plt.ylabel("Total Cases", fontsize=16)
plt.title("Simulation over 100 Days")
plt.legend(loc='best')
plt.show()
```


![](/images/covid_images/sim100.png)


The above curves are logistic curves and thus have an inflection point. This point is where the gradient or in this case growth rate moves from above 1 to below one is known as an inflection point.<br>
A growth factor <img src="https://latex.codecogs.com/gif.latex?\frac{\Delta&space;N(t)}{\Delta&space;N(t-1}" title="\frac{\Delta N(t)}{\Delta N(t-1}" /> of 1 indicates the logistic curve has hit the inflection point.


```python
for i in range(0, 2):
    for j in range(0, 2):
        growth_rates = []
        cases = expGrowth(E[i], p[j], N_0, days, Pop)
        for case in range(1, len(cases)):
            growth_rates.append(cases[case] - cases[case-1]) 
        plt.plot(range(1, days), growth_rates, label = "E={} p={}".format(E[i], p[j]))

plt.xlabel("Day", fontsize=16)  
plt.ylabel("Growth Rate", fontsize=16)
plt.title("Simulation over 100 Days")
plt.legend(loc='best')
plt.show()
```


![](/images/covid_images/sim100growthrate.png)


Ploting cases for just Australia we can see the similarities to the modelled growth



![](/images/covid_images/austotcases.png)


    


![](/images/covid_images/aus_growth_rate.png)




### [Source Code](https://github.com/JackMurrie/Covid_19)
